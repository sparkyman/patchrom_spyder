*** /home/dhacker29/patchrom/spyder/temp/dst_smali_orig/services.jar.out/smali/com/android/server/pm/PackageManagerService$SdInstallArgs.smali	2012-03-23 19:35:10.387776307 -0500
--- /home/dhacker29/patchrom/spyder/temp/dst_smali_orig/services.jar.out/smali/com/android/server/pm/PackageManagerService$SdInstallArgs.smali.original	2012-03-23 19:34:47.365356495 -0500
***************
*** 38,45 ****
--- 38,47 ----
      .prologue
      const/4 v2, 0x0
  
+     .line 6008
      iput-object p1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
+     .line 6009
      const/16 v3, 0x8
  
      move-object v0, p0
***************
*** 52,59 ****
--- 54,63 ----
  
      invoke-direct/range {v0 .. v5}, Lcom/android/server/pm/PackageManagerService$InstallArgs;-><init>(Landroid/net/Uri;Landroid/content/pm/IPackageInstallObserver;ILjava/lang/String;Landroid/content/pm/ManifestDigest;)V
  
+     .line 6010
      iput-object p3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 6011
      return-void
  .end method
  
***************
*** 63,70 ****
--- 67,76 ----
      .parameter "params"
  
      .prologue
+     .line 5987
      iput-object p1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
+     .line 5988
      iget-object v1, p2, Lcom/android/server/pm/PackageManagerService$InstallParams;->packageURI:Landroid/net/Uri;
  
      iget-object v2, p2, Lcom/android/server/pm/PackageManagerService$InstallParams;->observer:Landroid/content/pm/IPackageInstallObserver;
***************
*** 79,84 ****
--- 85,91 ----
  
      invoke-direct/range {v0 .. v5}, Lcom/android/server/pm/PackageManagerService$InstallArgs;-><init>(Landroid/net/Uri;Landroid/content/pm/IPackageInstallObserver;ILjava/lang/String;Landroid/content/pm/ManifestDigest;)V
  
+     .line 5990
      return-void
  .end method
  
***************
*** 90,97 ****
--- 97,106 ----
      .prologue
      const/4 v1, 0x0
  
+     .line 6002
      iput-object p1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
+     .line 6003
      const/16 v3, 0x8
  
      move-object v0, p0
***************
*** 104,117 ****
--- 113,129 ----
  
      invoke-direct/range {v0 .. v5}, Lcom/android/server/pm/PackageManagerService$InstallArgs;-><init>(Landroid/net/Uri;Landroid/content/pm/IPackageInstallObserver;ILjava/lang/String;Landroid/content/pm/ManifestDigest;)V
  
+     .line 6004
      iput-object p2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 6005
      invoke-static {p2}, Lcom/android/internal/content/PackageHelper;->getSdDir(Ljava/lang/String;)Ljava/lang/String;
  
      move-result-object v0
  
      invoke-direct {p0, v0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->setCachePath(Ljava/lang/String;)V
  
+     .line 6006
      return-void
  .end method
  
***************
*** 125,132 ****
--- 137,146 ----
      .prologue
      const/4 v1, 0x0
  
+     .line 5992
      iput-object p1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
+     .line 5993
      const/16 v3, 0x8
  
      move-object v0, p0
***************
*** 139,150 ****
--- 153,166 ----
  
      invoke-direct/range {v0 .. v5}, Lcom/android/server/pm/PackageManagerService$InstallArgs;-><init>(Landroid/net/Uri;Landroid/content/pm/IPackageInstallObserver;ILjava/lang/String;Landroid/content/pm/ManifestDigest;)V
  
+     .line 5995
      const-string v0, "/"
  
      invoke-virtual {p2, v0}, Ljava/lang/String;->lastIndexOf(Ljava/lang/String;)I
  
      move-result v6
  
+     .line 5996
      .local v6, eidx:I
      const/4 v0, 0x0
  
***************
*** 152,157 ****
--- 168,174 ----
  
      move-result-object v8
  
+     .line 5997
      .local v8, subStr1:Ljava/lang/String;
      const-string v0, "/"
  
***************
*** 159,164 ****
--- 176,182 ----
  
      move-result v7
  
+     .line 5998
      .local v7, sidx:I
      add-int/lit8 v0, v7, 0x1
  
***************
*** 168,175 ****
--- 186,195 ----
  
      iput-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 5999
      invoke-direct {p0, v8}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->setCachePath(Ljava/lang/String;)V
  
+     .line 6000
      return-void
  .end method
  
***************
*** 177,186 ****
--- 197,208 ----
      .locals 1
  
      .prologue
+     .line 6156
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      invoke-static {v0}, Lcom/android/internal/content/PackageHelper;->destroySdDir(Ljava/lang/String;)Z
  
+     .line 6157
      return-void
  .end method
  
***************
*** 189,198 ****
--- 211,222 ----
      .parameter "newCachePath"
  
      .prologue
+     .line 6136
      new-instance v0, Ljava/io/File;
  
      invoke-direct {v0, p1}, Ljava/io/File;-><init>(Ljava/lang/String;)V
  
+     .line 6137
      .local v0, cachePath:Ljava/io/File;
      new-instance v1, Ljava/io/File;
  
***************
*** 206,211 ****
--- 230,236 ----
  
      iput-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->libraryPath:Ljava/lang/String;
  
+     .line 6138
      new-instance v1, Ljava/io/File;
  
      const-string v2, "pkg.apk"
***************
*** 218,223 ****
--- 243,249 ----
  
      iput-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->packagePath:Ljava/lang/String;
  
+     .line 6139
      return-void
  .end method
  
***************
*** 235,240 ****
--- 261,267 ----
      .prologue
      const/4 v4, 0x1
  
+     .line 6019
      :try_start_0
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
***************
*** 248,253 ****
--- 275,281 ----
  
      invoke-virtual {v0, v1, v2, v3}, Landroid/content/Context;->grantUriPermission(Ljava/lang/String;Landroid/net/Uri;I)V
  
+     .line 6021
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->packageURI:Landroid/net/Uri;
  
      invoke-interface {p1, v0}, Lcom/android/internal/app/IMediaContainerService;->checkExternalFreeStorage(Landroid/net/Uri;)Z
***************
*** 256,261 ****
--- 284,290 ----
  
      move-result v0
  
+     .line 6023
      iget-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
      iget-object v1, v1, Lcom/android/server/pm/PackageManagerService;->mContext:Landroid/content/Context;
***************
*** 264,271 ****
--- 293,302 ----
  
      invoke-virtual {v1, v2, v4}, Landroid/content/Context;->revokeUriPermission(Landroid/net/Uri;I)V
  
+     .line 6021
      return v0
  
+     .line 6023
      :catchall_0
      move-exception v0
  
***************
*** 284,293 ****
--- 315,326 ----
      .locals 5
  
      .prologue
+     .line 6160
      invoke-virtual {p0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->getCodePath()Ljava/lang/String;
  
      move-result-object v1
  
+     .line 6162
      .local v1, sourceFile:Ljava/lang/String;
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
***************
*** 297,305 ****
--- 330,340 ----
  
      move-result v0
  
+     .line 6163
      .local v0, retCode:I
      if-gez v0, :cond_0
  
+     .line 6164
      const-string v2, "PackageManager"
  
      new-instance v3, Ljava/lang/StringBuilder;
***************
*** 336,344 ****
--- 371,381 ----
  
      invoke-static {v2, v3}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
  
+     .line 6169
      :cond_0
      invoke-direct {p0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cleanUp()V
  
+     .line 6170
      return-void
  .end method
  
***************
*** 355,364 ****
--- 392,404 ----
      .prologue
      const/4 v1, 0x1
  
+     .line 6028
      if-eqz p2, :cond_0
  
+     .line 6029
      invoke-virtual {p0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->createCopyFile()V
  
+     .line 6040
      :goto_0
      :try_start_0
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
***************
*** 373,378 ****
--- 413,419 ----
  
      invoke-virtual {v2, v3, v4, v5}, Landroid/content/Context;->grantUriPermission(Ljava/lang/String;Landroid/net/Uri;I)V
  
+     .line 6042
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->packageURI:Landroid/net/Uri;
  
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
***************
*** 392,397 ****
--- 433,439 ----
  
      move-result-object v0
  
+     .line 6045
      .local v0, newCachePath:Ljava/lang/String;
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
***************
*** 401,413 ****
--- 443,459 ----
  
      invoke-virtual {v2, v3, v1}, Landroid/content/Context;->revokeUriPermission(Landroid/net/Uri;I)V
  
+     .line 6048
      if-eqz v0, :cond_1
  
+     .line 6049
      invoke-direct {p0, v0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->setCachePath(Ljava/lang/String;)V
  
+     .line 6052
      :goto_1
      return v1
  
+     .line 6035
      .end local v0           #newCachePath:Ljava/lang/String;
      :cond_0
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
***************
*** 416,421 ****
--- 462,468 ----
  
      goto :goto_0
  
+     .line 6045
      :catchall_0
      move-exception v2
  
***************
*** 429,434 ****
--- 476,482 ----
  
      throw v2
  
+     .line 6052
      .restart local v0       #newCachePath:Ljava/lang/String;
      :cond_1
      const/16 v1, -0x12
***************
*** 440,451 ****
--- 488,501 ----
      .locals 1
  
      .prologue
+     .line 6014
      invoke-static {}, Lcom/android/server/pm/PackageManagerService;->getTempContainerId()Ljava/lang/String;
  
      move-result-object v0
  
      iput-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 6015
      return-void
  .end method
  
***************
*** 454,461 ****
--- 504,513 ----
      .parameter "delete"
  
      .prologue
+     .line 6188
      const/4 v1, 0x0
  
+     .line 6189
      .local v1, ret:Z
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
***************
*** 463,484 ****
--- 515,541 ----
  
      move-result v0
  
+     .line 6190
      .local v0, mounted:Z
      if-eqz v0, :cond_0
  
+     .line 6192
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      invoke-static {v2}, Lcom/android/internal/content/PackageHelper;->unMountSdDir(Ljava/lang/String;)Z
  
      move-result v1
  
+     .line 6194
      :cond_0
      if-eqz v1, :cond_1
  
      if-eqz p1, :cond_1
  
+     .line 6195
      invoke-virtual {p0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cleanUpResourcesLI()V
  
+     .line 6197
      :cond_1
      return v1
  .end method
***************
*** 488,503 ****
--- 545,564 ----
      .parameter "status"
  
      .prologue
+     .line 6142
      const/4 v1, 0x1
  
      if-eq p1, v1, :cond_1
  
+     .line 6143
      invoke-direct {p0}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cleanUp()V
  
+     .line 6151
      :cond_0
      :goto_0
      return p1
  
+     .line 6145
      :cond_1
      iget-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
***************
*** 505,513 ****
--- 566,576 ----
  
      move-result v0
  
+     .line 6146
      .local v0, mounted:Z
      if-nez v0, :cond_0
  
+     .line 6147
      iget-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
***************
*** 531,549 ****
--- 594,616 ----
      .parameter "status"
  
      .prologue
+     .line 6072
      const/4 v2, 0x1
  
      if-eq p1, v2, :cond_1
  
+     .line 6074
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      invoke-static {v2}, Lcom/android/internal/content/PackageHelper;->destroySdDir(Ljava/lang/String;)Z
  
+     .line 6087
      .end local p1
      :cond_0
      :goto_0
      return p1
  
+     .line 6076
      .restart local p1
      :cond_1
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
***************
*** 552,560 ****
--- 619,629 ----
  
      move-result v0
  
+     .line 6077
      .local v0, mounted:Z
      if-nez v0, :cond_0
  
+     .line 6078
      iget-object v2, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
***************
*** 570,582 ****
--- 639,654 ----
  
      move-result-object v1
  
+     .line 6080
      .local v1, newCachePath:Ljava/lang/String;
      if-eqz v1, :cond_2
  
+     .line 6081
      invoke-direct {p0, v1}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->setCachePath(Ljava/lang/String;)V
  
      goto :goto_0
  
+     .line 6083
      :cond_2
      const/16 p1, -0x12
  
***************
*** 592,597 ****
--- 664,670 ----
      .prologue
      const/4 v2, 0x0
  
+     .line 6092
      const-string v3, "/pkg.apk"
  
      #calls: Lcom/android/server/pm/PackageManagerService;->getNextCodePath(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
***************
*** 599,607 ****
--- 672,682 ----
  
      move-result-object v0
  
+     .line 6093
      .local v0, newCacheId:Ljava/lang/String;
      const/4 v1, 0x0
  
+     .line 6094
      .local v1, newCachePath:Ljava/lang/String;
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
***************
*** 611,616 ****
--- 686,692 ----
  
      if-eqz v3, :cond_0
  
+     .line 6096
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      invoke-static {v3}, Lcom/android/internal/content/PackageHelper;->unMountSdDir(Ljava/lang/String;)Z
***************
*** 619,624 ****
--- 695,701 ----
  
      if-nez v3, :cond_0
  
+     .line 6097
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 649,657 ****
--- 726,736 ----
  
      invoke-static {v3, v4}, Landroid/util/Slog;->i(Ljava/lang/String;Ljava/lang/String;)I
  
+     .line 6132
      :goto_0
      return v2
  
+     .line 6101
      :cond_0
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
***************
*** 661,666 ****
--- 740,746 ----
  
      if-nez v3, :cond_2
  
+     .line 6102
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 701,712 ****
--- 781,794 ----
  
      invoke-static {v3, v4}, Landroid/util/Slog;->e(Ljava/lang/String;Ljava/lang/String;)I
  
+     .line 6105
      invoke-static {v0}, Lcom/android/internal/content/PackageHelper;->destroySdDir(Ljava/lang/String;)Z
  
      move-result v3
  
      if-nez v3, :cond_1
  
+     .line 6106
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 731,736 ****
--- 813,819 ----
  
      goto :goto_0
  
+     .line 6110
      :cond_1
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
***************
*** 740,745 ****
--- 823,829 ----
  
      if-nez v3, :cond_2
  
+     .line 6111
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 782,787 ****
--- 866,872 ----
  
      goto/16 :goto_0
  
+     .line 6116
      :cond_2
      invoke-static {v0}, Lcom/android/internal/content/PackageHelper;->isContainerMounted(Ljava/lang/String;)Z
  
***************
*** 789,794 ****
--- 874,880 ----
  
      if-nez v3, :cond_3
  
+     .line 6117
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 811,816 ****
--- 897,903 ----
  
      invoke-static {v3, v4}, Landroid/util/Slog;->w(Ljava/lang/String;Ljava/lang/String;)I
  
+     .line 6118
      iget-object v3, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->this$0:Lcom/android/server/pm/PackageManagerService;
  
      #calls: Lcom/android/server/pm/PackageManagerService;->getEncryptKey()Ljava/lang/String;
***************
*** 824,832 ****
--- 911,921 ----
  
      move-result-object v1
  
+     .line 6123
      :goto_1
      if-nez v1, :cond_4
  
+     .line 6124
      const-string v3, "PackageManager"
  
      new-instance v4, Ljava/lang/StringBuilder;
***************
*** 851,856 ****
--- 940,946 ----
  
      goto/16 :goto_0
  
+     .line 6121
      :cond_3
      invoke-static {v0}, Lcom/android/internal/content/PackageHelper;->getSdDir(Ljava/lang/String;)Ljava/lang/String;
  
***************
*** 858,863 ****
--- 948,954 ----
  
      goto :goto_1
  
+     .line 6127
      :cond_4
      const-string v2, "PackageManager"
  
***************
*** 903,912 ****
--- 994,1006 ----
  
      invoke-static {v2, v3}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
  
+     .line 6130
      iput-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 6131
      invoke-direct {p0, v1}, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->setCachePath(Ljava/lang/String;)V
  
+     .line 6132
      const/4 v2, 0x1
  
      goto/16 :goto_0
***************
*** 916,921 ****
--- 1010,1016 ----
      .locals 1
  
      .prologue
+     .line 6058
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->packagePath:Ljava/lang/String;
  
      return-object v0
***************
*** 925,930 ****
--- 1020,1026 ----
      .locals 1
  
      .prologue
+     .line 6068
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->libraryPath:Ljava/lang/String;
  
      return-object v0
***************
*** 934,939 ****
--- 1030,1036 ----
      .locals 3
  
      .prologue
+     .line 6180
      iget-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      const-string v2, "-"
***************
*** 942,954 ****
--- 1039,1054 ----
  
      move-result v0
  
+     .line 6181
      .local v0, idx:I
      const/4 v1, -0x1
  
      if-ne v0, v1, :cond_0
  
+     .line 6182
      iget-object v1, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
+     .line 6184
      :goto_0
      return-object v1
  
***************
*** 968,973 ****
--- 1068,1074 ----
      .locals 1
  
      .prologue
+     .line 6063
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->packagePath:Ljava/lang/String;
  
      return-object v0
***************
*** 978,983 ****
--- 1079,1085 ----
      .parameter "app"
  
      .prologue
+     .line 6173
      iget-object v0, p0, Lcom/android/server/pm/PackageManagerService$SdInstallArgs;->cid:Ljava/lang/String;
  
      invoke-virtual {v0, p1}, Ljava/lang/String;->startsWith(Ljava/lang/String;)Z
***************
*** 986,993 ****
--- 1088,1097 ----
  
      if-eqz v0, :cond_0
  
+     .line 6174
      const/4 v0, 0x1
  
+     .line 6176
      :goto_0
      return v0
  
